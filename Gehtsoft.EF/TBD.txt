Сделать XmlAstNode отдельным классом

Refactor truncate rules:
make it interface, provide default implementation and associate it with the connection instance.
